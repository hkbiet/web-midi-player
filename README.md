[![Open Source Helpers](https://www.codetriage.com/yvesgurcan/web-midi-player/badges/users.svg)](https://www.codetriage.com/yvesgurcan/web-midi-player)

This event-driven library enables MIDI playback in the browser.

Check out the [example](https://midi.yvesgurcan.com/example/).

## Install

This library can be installed via NPM.

    npm i web-midi-player

Alternatively, this NPM package is hosted for free by [jsDeliver](https://www.jsdelivr.com/). You can add this library via the jsDeliver CDN:

    <script src="https://cdn.jsdelivr.net/npm/web-midi-player@latest/"></script>

## Getting started

    import MidiPlayer from 'web-midi-player';

    const midiPlayer = new MidiPlayer();

    midiPlayer.play('song.mid');

## API

### HTML

[The API documentation is available as a HTML file.](https://midi.yvesgurcan.com/docs/)

### Markdown

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

-   [MidiPlayer](#midiplayer)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
    -   [play](#play)
        -   [Parameters](#parameters-1)
        -   [Examples](#examples-1)
    -   [pause](#pause)
        -   [Examples](#examples-2)
    -   [resume](#resume)
        -   [Examples](#examples-3)
    -   [stop](#stop)
        -   [Examples](#examples-4)
    -   [emitEvent](#emitevent)
        -   [Parameters](#parameters-2)
        -   [Examples](#examples-5)
-   [Event](#event)

#### MidiPlayer

##### Parameters

-   `configuration` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** 
    -   `configuration.eventLogger` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** The function that receives event payloads. (optional, default `undefined`)
    -   `configuration.logging` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Turns ON or OFF logging to the console. (optional, default `false`)
    -   `configuration.patchUrl` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The public path where MIDI instrument patches can be found. (optional, default `/public/midi/pat/`)

##### Examples

```javascript
import MidiPlayer from 'web-midi-player';

const eventLogger = (payload) => {
  console.log('Received event:', payload.event)
}

const midiPlayer = new MidiPlayer({ eventLogger, logging: true, patchUrl: '/patches/' });
```

Returns **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** A `MidiPlayer` instance.

##### play

Starts playback of MIDI input.

Please note that you can not use `input.arrayBuffer` and `input.url` concurrently.

###### Parameters

-   `input` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `input.arrayBuffer` **[arrayBuffer](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)?** An array buffer containing MIDI data.
    -   `input.url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** The URL where the MIDI file is located.
    -   `input.name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** A human-friendly name for the song.

###### Examples

```javascript
const name1 = 'My MIDI file from URL';
const url = 'media/file.midi';
midiPlayer.play({ url, name: name1 });

const name2 = 'My MIDI file from ArrayBuffer';
const arrayBuffer = new ArrayBuffer();
midiPlayer.play({ arrayBuffer , name: name2 });
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether playback was successfully initiated or not.

##### pause

Pauses playback of MIDI input.

###### Examples

```javascript
midiPlayer.pause();
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether playback was successfully paused or not.

##### resume

Resumes playback of MIDI input.

###### Examples

```javascript
midiPlayer.resume();
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether playback was successfully ressumed or not.

##### stop

Stops playback of MIDI input.

###### Examples

```javascript
midiPlayer.stop();
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether playback was successfully stopped or not.

##### emitEvent

Send custom payloads to the event logger.

###### Parameters

-   `payload` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `payload.event` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** The name of the event.
    -   `payload.message` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** A message that described the event.

###### Examples

```javascript
const event = 'CUSTOM_EVENT';
const message = 'Something happened.';
midiPlayer.emitEvent({ event, message });
```

#### Event

This class has not been implemented yet.

## Contribute

Something doesn't work? We want to know! Open a [new issue](https://github.com/yvesgurcan/web-midi-player/issues/new).

Want a new feature? Awesome! Open a [pull request](https://github.com/yvesgurcan/web-midi-player/compare).

### Setup

Clone the repository.

    git clone https://github.com/yvesgurcan/web-midi-player

Install dependencies.

    npm i

Start development server.

    npm start

### Before committing your code

Run linter.

    npm run lint

Execute tests.

    npm run test

Create new build.

    npm run build

Update documentation.

    npm run docs
    npm run docs:readme

## 
